---
title: 数组扁平化
date: 2022-08-30 10:09:14
tags: typescript
---

```text
把嵌套n层的数组，转换成一层，例如：
[1,[2,3,[4,5]]]======>[1,2,3,4,5]
```
<!--more-->

## 递归实现

```typescript
const arr = [1,[2,3,[4,5]]]
function flatten(arr) {
    let data = []
    arr.forEach(item=>{
        if(Array.isArray(item)){
            data = data.concat(flatten(item))
        }else{
            data.push(item)
        }
    })
    return data
}
console.log(flatten(arr)) //  [1, 2, 3, 4, 5]
```

## while循环

```typescript
let arr = [1,[2,3,[4,5]]]
while (arr.find(item => Array.isArray(item))) {
    arr = [].concat(...arr)
    // concat : 合并多个数组、单项并返回一个新的数组
}
console.log(arr) //  [1, 2, 3, 4, 5]
```

## flat

```typescript
let arr = [1,[2,3,[4,5]]]

// 默认转换嵌套层数1
console.log(arr.flat()); //  [1, 2, 3, [4, 5]]
console.log(arr.flat(1)); // [1, 2, 3, [4, 5]]

// 指定转换的嵌套层数
console.log(arr.flat(2)); //  [1, 2, 3, 4, 5]
 
// 不管嵌套多少层
console.log(arr.flat(Infinity)); //  [1, 2, 3, 4, 5]
 
// 自动跳过空位
console.log([1, [2, , 3]].flat()); //  [1, 2, 3]

// 不改变原数组
console.log(arr) //  [1,[2,3,[4,5]]]
```

## toString + split

```typescript
let arr = [1,[2,3,[4,5]]]
arr = arr.toString() // '1,2,3,4,5' join方法也可以
arr = arr.split(',') //  ['1', '2', '3', '4', '5']
arr = arr.map(item=>Number(item)) //  [1, 2, 3, 4, 5]
```
